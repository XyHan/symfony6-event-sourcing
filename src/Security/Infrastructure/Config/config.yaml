services:
  _defaults:
    autowire: true
    autoconfigure: true

  Security\:
    resource: '%kernel.project_dir%/src/Security/*'

  Security\Domain\Repository\UserRepository:
    arguments:
      - '@broadway.event_store'
      - '@broadway.event_handling.event_bus'
      -
        - '@broadway.metadata_enriching_event_stream_decorator'

  Security\Application\Command\CreateAUser\CreateAUserCommandHandler:
    arguments:
      - '@Security\Domain\Repository\UserRepository'
    tags:
      - { name: broadway.command_handler }

  Security\Ui\Projector\DoctrineUserProjector:
    tags:
      - { name: broadway.domain.event_listener }
